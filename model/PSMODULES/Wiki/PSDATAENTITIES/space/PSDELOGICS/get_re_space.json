{
  "codeName" : "get_re_space",
  "defaultParamName" : "Default",
  "dynaModelFilePath" : "PSMODULES/Wiki/PSDATAENTITIES/space/PSDELOGICS/get_re_space.json",
  "logicName" : "获取关联的空间",
  "name" : "获取关联的空间",
  "getPSDELogicNodes" : [ {
    "codeName" : "Begin",
    "leftPos" : 200,
    "logicNodeType" : "BEGIN",
    "name" : "开始",
    "getPSDELogicLinks" : [ {
      "getDstPSDELogicNode" : {
        "modelref" : true,
        "id" : "RAWSQLCALL1"
      },
      "name" : "连接名称",
      "getSrcPSDELogicNode" : {
        "modelref" : true,
        "id" : "Begin"
      }
    } ],
    "topPos" : 200,
    "parallelOutput" : true
  }, {
    "codeName" : "RAWSQLCALL1",
    "getDstPSDELogicParam" : {
      "modelref" : true,
      "id" : "page"
    },
    "leftPos" : 160,
    "logicNodeType" : "RAWSQLCALL",
    "name" : "获取关联数据",
    "getPSDELogicLinks" : [ {
      "getDstPSDELogicNode" : {
        "modelref" : true,
        "id" : "RAWSFCODE1"
      },
      "name" : "连接名称",
      "getSrcPSDELogicNode" : {
        "modelref" : true,
        "id" : "RAWSQLCALL1"
      }
    } ],
    "getPSDELogicNodeParams" : [ {
      "name" : "Default[principal_type]",
      "paramAction" : "SQLPARAM",
      "srcFieldName" : "principal_type",
      "getSrcPSDELogicParam" : {
        "modelref" : true,
        "id" : "Default"
      },
      "srcValueType" : "SRCDLPARAM"
    }, {
      "name" : "Default[target_type]",
      "paramAction" : "SQLPARAM",
      "srcFieldName" : "target_type",
      "getSrcPSDELogicParam" : {
        "modelref" : true,
        "id" : "Default"
      },
      "srcValueType" : "SRCDLPARAM"
    }, {
      "name" : "Default[principal_id]",
      "paramAction" : "SQLPARAM",
      "srcFieldName" : "principal_id",
      "getSrcPSDELogicParam" : {
        "modelref" : true,
        "id" : "Default"
      },
      "srcValueType" : "SRCDLPARAM"
    } ],
    "sql" : "SELECT\r\n\tt1.ID,\r\n\tt1.`NAME`,\r\n\tt2.RELATION_TYPE \r\nFROM\r\n\tspace t1\r\n\tJOIN relation t2 ON t2.TARGET_ID = t1.ID \r\nWHERE\r\n\tt1.IS_DELETED = 0 \r\n\tAND t1.IS_ARCHIVED = 0 \r\n\tAND t2.PRINCIPAL_TYPE = ? \r\n\tAND t2.TARGET_TYPE = ? \r\n\tAND t2.PRINCIPAL_ID = ?;",
    "topPos" : 371,
    "fillDstLogicParam" : true
  }, {
    "code" : "def page = logic.param('page').getReal()\r\n\r\npage.each { item ->\r\n    if (item.get('relation_type') == 'main_space') {\r\n        item.set('user_tag', '<?xml version=\"1.0\" encoding=\"UTF-8\"?><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" class=\"design-iconfont\" width=\"20\" height=\"20\"><title>֪主知识库</title><path d=\"M17.5,15 L5,15 C4.53976667,15 4.16666667,15.3730833 4.16666667,15.8333333 C4.16666667,16.2935833 4.53976667,16.6666667 5,16.6666667 L17.5,16.6666667 L17.5,18.3333333 L5,18.3333333 C3.61929167,18.3333333 2.5,17.2140833 2.5,15.8333333 L2.5,3.33333333 C2.5,2.41285833 3.24619167,1.66666667 4.16666667,1.66666667 L17.5,1.66666667 L17.5,15 Z M13.3333333,7.5 L13.3333333,5.83333333 L6.66666667,5.83333333 L6.66666667,7.5 L13.3333333,7.5 Z\" fill=\"orange\" fill-rule=\"nonzero\"></path></svg>')\r\n    } else {\r\n        item.set('user_tag', '<?xml version=\"1.0\" encoding=\"UTF-8\"?><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" class=\"design-iconfont\" width=\"20\" height=\"20\"><title>֪知识库</title><path d=\"M17.5,15 L5,15 C4.53976667,15 4.16666667,15.3730833 4.16666667,15.8333333 C4.16666667,16.2935833 4.53976667,16.6666667 5,16.6666667 L17.5,16.6666667 L17.5,18.3333333 L5,18.3333333 C3.61929167,18.3333333 2.5,17.2140833 2.5,15.8333333 L2.5,3.33333333 C2.5,2.41285833 3.24619167,1.66666667 4.16666667,1.66666667 L17.5,1.66666667 L17.5,15 Z M13.3333333,7.5 L13.3333333,5.83333333 L6.66666667,5.83333333 L6.66666667,7.5 L13.3333333,7.5 Z\" fill=\"#56ABFB\" fill-rule=\"nonzero\"></path></svg>')\r\n    }\r\n}",
    "codeName" : "RAWSFCODE1",
    "codeType" : "Groovy",
    "leftPos" : 160,
    "logicNodeType" : "RAWSFCODE",
    "name" : "执行脚本代码",
    "getPSDELogicLinks" : [ {
      "getDstPSDELogicNode" : {
        "modelref" : true,
        "id" : "END1"
      },
      "name" : "连接名称",
      "getSrcPSDELogicNode" : {
        "modelref" : true,
        "id" : "RAWSFCODE1"
      }
    } ],
    "topPos" : 540
  }, {
    "codeName" : "END1",
    "leftPos" : 200,
    "logicNodeType" : "END",
    "name" : "结束",
    "getReturnParam" : {
      "modelref" : true,
      "id" : "page"
    },
    "returnType" : "LOGICPARAM",
    "topPos" : 761
  } ],
  "getPSDELogicParams" : [ {
    "codeName" : "Default",
    "logicName" : "传入变量",
    "name" : "传入变量",
    "getParamPSDataEntity" : {
      "modelref" : true,
      "path" : "PSMODULES/Wiki/PSDATAENTITIES/space.json"
    },
    "default" : true,
    "filterParam" : true
  }, {
    "codeName" : "page",
    "logicName" : "page",
    "name" : "page",
    "getParamPSDataEntity" : {
      "modelref" : true,
      "path" : "PSMODULES/Wiki/PSDATAENTITIES/space.json"
    },
    "entityListParam" : true
  } ],
  "getStartPSDELogicNode" : {
    "modelref" : true,
    "id" : "Begin"
  },
  "enableBackend" : true,
  "enableFront" : false
}