!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,n,r){return t=f()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&l(o,n.prototype),o},t.apply(null,arguments)}function n(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function u(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===e(n)?n:String(n)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function c(t){var n=f();return function(){var r,o=s(t);if(n){var i=s(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(this,r)}}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}System.register(["@ibiz-template/vue3-util","@ibiz-template/runtime","vue"],(function(e,r){"use strict";var i,f,s,p,d,y,m,h,b,v,g,P,C;return{setters:[function(e){i=e.useControlController,f=e.useNamespace,s=e.withInstall},function(e){p=e.GridController,d=e.registerControlProvider,y=e.ControlType},function(e){m=e.defineComponent,h=e.ref,b=e.watch,v=e.computed,g=e.createVNode,P=e.resolveComponent,C=e.isVNode}],execute:function(){var r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(r,e);var t=c(r);function r(){return o(this,r),t.apply(this,arguments)}return u(r,[{key:"simpleList",get:function(){var e;return null===(e=this.view.parentView)||void 0===e?void 0:e.getController("simplelist")}},{key:"handleSelection",value:function(e){var t=this.state,r=t.items,o=t.selectedData.filter((function(e){return!r.find((function(t){return t.srfkey===e.srfkey}))})),i=r.filter((function(t){return e.includes(t.srfkey)}));o.push.apply(o,n(i)),this.setSelection(o),this.handlePushSimpleListItems()}},{key:"handlePushSimpleListItems",value:function(){var e,t=n(this.state.selectedData);null===(e=this.simpleList)||void 0===e||e.setData(t)}}]),r}(p);var w=m({name:"CheckboxGrid",props:{modelData:{type:Object,required:!0},context:{type:Object,required:!0},params:{type:Object,default:function(){return{}}},provider:{type:Object},mdctrlActiveMode:{type:Number,default:void 0},singleSelect:{type:Boolean,default:void 0},rowEditOpen:{type:Boolean,default:void 0},isSimple:{type:Boolean,required:!1},data:{type:Array,required:!1},loadDefault:{type:Boolean,default:!0}},setup:function(){var e=i((function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return t(r,n)})),o=f("checkbox-grid"),u=h([]);b((function(){return e.state.selectedData}),(function(e){u.value=e.map((function(e){return e.srfkey}))}));var a=v((function(){var t=e.state;if(e.model.enableGroup){var r=[];return t.groups.forEach((function(e){if(e.children.length){var t=n(e.children),o=t.shift();r.push({srfkey:(null==o?void 0:o.srfkey)||e.caption,isGroupData:!0,caption:e.caption,first:o,children:t})}})),r}return t.rows.map((function(e){return e.data}))})),l=v((function(){if(e.isMultistageHeader)return e.model.degridColumns||[];var t=[];return e.state.columnStates.forEach((function(n){var r,o;if(!n.hidden){var i=(null===(r=e.fieldColumns[n.key])||void 0===r?void 0:r.model)||(null===(o=e.uaColumns[n.key])||void 0===o?void 0:o.model);i&&t.push(i)}})),t})),c=function(){return e.state.isLoaded&&g(P("iBizNoData"),{text:e.model.emptyText,emptyTextLanguageRes:e.model.emptyTextLanguageRes},null)};return{c:e,ns:o,onPageChange:function(t){t&&t!==e.state.curPage&&(e.state.curPage=t-1,e.load({isLoadMore:!0}))},onPageSizeChange:function(t){t&&t!==e.state.size&&(e.state.size=t,1===e.state.curPage&&e.load())},onPageRefresh:function(){e.load()},renderNoData:c,renderContent:function(){var t,n;return a.value.length>0?g(P("el-checkbox-group"),{modelValue:u.value,"onUpdate:modelValue":function(e){return u.value=e},onChange:function(t){return e.handleSelection(t)}},"function"==typeof(n=t=a.value.map((function(e){return g(P("el-checkbox"),{label:e.srfkey},{default:function(){return[g("span",{class:o.em("content","item"),title:e[l.value[0].codeName]},[e[l.value[0].codeName]])]}})})))||"[object Object]"===Object.prototype.toString.call(n)&&!C(n)?t:{default:function(){return[t]}}):c()}}},render:function(){var e=this;if(this.c.state.isCreated){var t=this.c.state,n=this.c.model.enablePagingBar;return g(P("iBizControlBase"),{class:[this.ns.is("enable-page",n),this.ns.is("enable-group",this.c.model.enableGroup),this.ns.b()],controller:this.c},{default:function(){return[g("div",{class:e.ns.e("content")},[e.renderContent()]),n&&g(P("iBizPagination"),{total:t.total,curPage:t.curPage,size:t.size,onChange:e.onPageChange,onPageSizeChange:e.onPageSizeChange,onPageRefresh:e.onPageRefresh},null)]}})}}}),S=u((function e(){var t,n,r;o(this,e),t=this,r="CheckboxGrid",(n=a(n="component"))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r})),O=e("IBizCheckboxGrid",s(w,(function(e){e.component(w.name,w),d("".concat(y.GRID,"_RENDER_CHECKBOX_GRID"),(function(){return new S}))})));e("default",{install:function(e){e.use(O)}})}}}))}();
