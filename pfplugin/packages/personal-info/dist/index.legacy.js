!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e=function(){return n};var r,n={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",s=u.asyncIterator||"@@asyncIterator",l=u.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(r){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof w?e:w,i=Object.create(o.prototype),u=new Y(n||[]);return a(i,"_invoke",{value:P(t,r,u)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}n.wrap=h;var d="suspendedStart",v="suspendedYield",m="executing",y="completed",g={};function w(){}function b(){}function x(){}var L={};f(L,c,(function(){return this}));var E=Object.getPrototypeOf,O=E&&E(E(N([])));O&&O!==o&&i.call(O,c)&&(L=O);var S=x.prototype=w.prototype=Object.create(L);function j(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function M(e,r){function n(o,a,u,c){var s=p(e[o],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==t(f)&&i.call(f,"__await")?r.resolve(f.__await).then((function(t){n("next",t,u,c)}),(function(t){n("throw",t,u,c)})):r.resolve(f).then((function(t){l.value=t,u(l)}),(function(t){return n("throw",t,u,c)}))}c(s.arg)}var o;a(this,"_invoke",{value:function(t,e){function i(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(i,i):i()}})}function P(t,e,n){var o=d;return function(i,a){if(o===m)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:r,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=A(u,n);if(c){if(c===g)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=p(t,e,n);if("normal"===s.type){if(o=n.done?y:v,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function A(t,e){var n=e.method,o=t.iterator[n];if(o===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=r,A(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=p(o,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,g;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,g):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Y(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function t(){for(;++o<e.length;)if(i.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=r,t.done=!0,t};return a.next=a}}throw new TypeError(t(e)+" is not iterable")}return b.prototype=x,a(S,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,l,"GeneratorFunction")),t.prototype=Object.create(S),t},n.awrap=function(t){return{__await:t}},j(M.prototype),f(M.prototype,s,(function(){return this})),n.AsyncIterator=M,n.async=function(t,e,r,o,i){void 0===i&&(i=Promise);var a=new M(h(t,e,r,o),i);return n.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},j(S),f(S,l,"Generator"),f(S,c,(function(){return this})),f(S,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},n.values=N,Y.prototype={constructor:Y,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(D),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,o){return u.type="throw",u.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),s=i.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:N(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),g}},n}function r(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(s){return void r(s)}u.done?e(c):Promise.resolve(c).then(n,o)}function n(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function u(t){r(a,o,i,u,c,"next",t)}function c(t){r(a,o,i,u,c,"throw",t)}u(void 0)}))}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function a(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},u.apply(this,arguments)}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}function s(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=f(e);if(r){var i=f(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}(this,n)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function h(t,e,r){return(e=p(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p(e){var r=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"===t(r)?r:String(r)}System.register(["@ibiz-template/runtime","@ibiz-template/vue3-util","vue","ramda","@ibiz-template/core","dayjs"],(function(t,r){"use strict";var i,p,d,v,m,y,g,w,b,x,L,E,O,S,j,M,P;return{setters:[function(t){i=t.CodeListEditorController,p=t.OpenAppViewCommand,d=t.registerEditorProvider},function(t){v=t.getSpanProps,m=t.useNamespace,y=t.useFocusAndBlur,g=t.withInstall},function(t){w=t.defineComponent,b=t.ref,x=t.watch,L=t.computed,E=t.createVNode},function(t){O=t.isNil},function(t){S=t.DataTypes,j=t.RuntimeModelError,M=t.RuntimeError},function(t){P=t.default}],execute:function(){"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function r(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var A={exports:{}};!function(t,e){t.exports=function(){var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},e=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,n=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,i={},a=function(t){return(t=+t)+(t>68?1900:2e3)},u=function(t){return function(e){this[t]=+e}},c=[/[+-]\d\d:?(\d\d)?|Z/,function(t){(this.zone||(this.zone={})).offset=function(t){if(!t)return 0;if("Z"===t)return 0;var e=t.match(/([+-]|\d\d)/g),r=60*e[1]+(+e[2]||0);return 0===r?0:"+"===e[0]?-r:r}(t)}],s=function(t){var e=i[t];return e&&(e.indexOf?e:e.s.concat(e.f))},l=function(t,e){var r,n=i.meridiem;if(n){for(var o=1;o<=24;o+=1)if(t.indexOf(n(o,0,e))>-1){r=o>12;break}}else r=t===(e?"pm":"PM");return r},f={A:[o,function(t){this.afternoon=l(t,!1)}],a:[o,function(t){this.afternoon=l(t,!0)}],S:[/\d/,function(t){this.milliseconds=100*+t}],SS:[r,function(t){this.milliseconds=10*+t}],SSS:[/\d{3}/,function(t){this.milliseconds=+t}],s:[n,u("seconds")],ss:[n,u("seconds")],m:[n,u("minutes")],mm:[n,u("minutes")],H:[n,u("hours")],h:[n,u("hours")],HH:[n,u("hours")],hh:[n,u("hours")],D:[n,u("day")],DD:[r,u("day")],Do:[o,function(t){var e=i.ordinal,r=t.match(/\d+/);if(this.day=r[0],e)for(var n=1;n<=31;n+=1)e(n).replace(/\[|\]/g,"")===t&&(this.day=n)}],M:[n,u("month")],MM:[r,u("month")],MMM:[o,function(t){var e=s("months"),r=(s("monthsShort")||e.map((function(t){return t.slice(0,3)}))).indexOf(t)+1;if(r<1)throw new Error;this.month=r%12||r}],MMMM:[o,function(t){var e=s("months").indexOf(t)+1;if(e<1)throw new Error;this.month=e%12||e}],Y:[/[+-]?\d+/,u("year")],YY:[r,function(t){this.year=a(t)}],YYYY:[/\d{4}/,u("year")],Z:c,ZZ:c};function h(r){var n,o;n=r,o=i&&i.formats;for(var a=(r=n.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(e,r,n){var i=n&&n.toUpperCase();return r||o[n]||t[n]||o[i].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(t,e,r){return e||r.slice(1)}))}))).match(e),u=a.length,c=0;c<u;c+=1){var s=a[c],l=f[s],h=l&&l[0],p=l&&l[1];a[c]=p?{regex:h,parser:p}:s.replace(/^\[|\]$/g,"")}return function(t){for(var e={},r=0,n=0;r<u;r+=1){var o=a[r];if("string"==typeof o)n+=o.length;else{var i=o.regex,c=o.parser,s=t.slice(n),l=i.exec(s)[0];c.call(e,l),t=t.replace(l,"")}}return function(t){var e=t.afternoon;if(void 0!==e){var r=t.hours;e?r<12&&(t.hours+=12):12===r&&(t.hours=0),delete t.afternoon}}(e),e}}return function(t,e,r){r.p.customParseFormat=!0,t&&t.parseTwoDigitYear&&(a=t.parseTwoDigitYear);var n=e.prototype,o=n.parse;n.parse=function(t){var e=t.date,n=t.utc,a=t.args;this.$u=n;var u=a[1];if("string"==typeof u){var c=!0===a[2],s=!0===a[3],l=c||s,f=a[2];s&&(f=a[2]),i=this.$locale(),!c&&f&&(i=r.Ls[f]),this.$d=function(t,e,r){try{if(["x","X"].indexOf(e)>-1)return new Date(("X"===e?1e3:1)*t);var n=h(e)(t),o=n.year,i=n.month,a=n.day,u=n.hours,c=n.minutes,s=n.seconds,l=n.milliseconds,f=n.zone,p=new Date,d=a||(o||i?1:p.getDate()),v=o||p.getFullYear(),m=0;o&&!i||(m=i>0?i-1:p.getMonth());var y=u||0,g=c||0,w=s||0,b=l||0;return f?new Date(Date.UTC(v,m,d,y,g,w,b+60*f.offset*1e3)):r?new Date(Date.UTC(v,m,d,y,g,w,b)):new Date(v,m,d,y,g,w,b)}catch(t){return new Date("")}}(e,u,n),this.init(),f&&!0!==f&&(this.$L=this.locale(f).$L),l&&e!=this.format(u)&&(this.$d=new Date("")),i={}}else if(u instanceof Array)for(var p=u.length,d=1;d<=p;d+=1){a[1]=u[d-1];var v=r.apply(this,a);if(v.isValid()){this.$d=v.$d,this.$L=v.$L,this.init();break}d===p&&(this.$d=new Date(""))}else o.call(this,t)}}}()}(A);var T=r(A.exports);P.extend(T);var D=w({name:"IBizPersonalInfo",props:v(),setup:function(t,e){var r,n=e.emit,o=m("personal-info"),i=t.controller,a=b(""),u=i.codeList,c=i.model.textSeparator||(null===(r=i.editorParams)||void 0===r?void 0:r.TEXTSEPARATOR)||",",s=b([]);u&&x((function(){return t.data}),(function(t){i.loadCodeList(t).then((function(t){s.value=t}))}),{immediate:!0,deep:!0});var l=y((function(){return n("focus")}),(function(){return n("blur")})).componentRef,f=L((function(){return!(!t.controlParams||"hover"!==t.controlParams.editmode)})),h=function(t){if(!t)return"";for(var e=0,r=0;r<t.length;r++){if(/[\u4E00-\u9FA5]/.test(t))e=t.charCodeAt(r)+((e<<5)-e),e&=e;else e+=t.charCodeAt(r).toString(16)}var n=String(e).substring(0,6),o=parseInt(n.substring(0,2),16),i=parseInt(n.substring(2,4),16),a=parseInt(n.substring(4,6),16);o<0&&(o=10),i<0&&(i=10),a<0&&(a=10);var u,c="#".concat(o.toString(16).padStart(2,"0")).concat(i.toString(16).padStart(2,"0")).concat(a.toString(16).padStart(2,"0"));return"#FFFFFF"===c&&((u=document.documentElement)?getComputedStyle(u).getPropertyValue("--ibiz-color-primary"):null)||c},p=function t(e,r){if(e){var n=e.find((function(t){return t.value==r}));if(n)return n;for(var o=0;o<e.length;o++){var i=t(e[o].children,r);if(i)return i}}},d=function(t){var e;if(t&&null!==(e=t.data)&&void 0!==e&&e.iconurl)return t.data.iconurl};x((function(){return t.value}),(function(t,e){if(t!==e){var r;if(O(t))return void(a.value="");var n="",o=i.parent,u=o.valueFormat,l=o.dataType,f=o.unitName;if("SIMPLES"===i.model.valueType)n=t.join(c);else if("OBJECT"===i.model.valueType)n=t[i.model.objectNameField?i.model.objectNameField:"srfmajortext"];else if("OBJECTS"===i.model.valueType){var h=[];t.forEach((function(t){h.push(t[i.model.objectNameField?i.model.objectNameField:"srfmajortext"])})),n=h.join(c)}else if("ADDRESSPICKUP"===i.model.editorType)try{var d=[];JSON.parse(t).forEach((function(t){d.push(t[i.model.objectNameField?i.model.objectNameField:"srfmajortext"])})),n=d.join(c)}catch(b){ibiz.log.error("标签地址选择器的值不符合JSON格式".concat(t))}else if(u)try{if(null!=l&&S.isDate(l))n=P(t).format(u);else{var v=P(t).format(u);n=(g=n)!==(w=u)&&P(g,w,!0).isValid()?v:ibiz.util.text.format("".concat(t),u)}}catch(b){n="".concat(t),ibiz.log.error("".concat(t," 值格式化错误"))}else n="".concat(t);if(f&&(n+=f),i.codeList&&(null===(r=s.value)||void 0===r?void 0:r.length)>0){var m=s.value,y=p(m,n);n=(null==y?void 0:y.text)||n}a.value=n}var g,w}),{immediate:!0});var v=L((function(){var t,e=a.value;if(i.codeList&&(null===(t=s.value)||void 0===t?void 0:t.length)>0){var r=s.value,n=p(r,e);e=(null==n?void 0:n.text)||e}return e})),g=function(){if(t.value){var e=p(s.value,t.value);if(e&&d(e)){var r=d(e),n=JSON.parse(r),a=ibiz.util.file.calcFileUpDownUrl(i.context,i.params).downloadUrl.replace("%fileId%",n[0].id);return E("img",{class:o.bem("content","head-sculpture","avatar-icon"),src:a,alt:""},null)}}return function(t){if(t&&t.toString().length<2)return t;if(t&&t.toString().length>=2){if(/[\u4e00-\u9fa5]+.*[a-zA-Z]+|[a-zA-Z]+.*[\u4e00-\u9fa5]+/.test(t)){var e=t.split("").find((function(t){return/[a-zA-Z]/.test(t)}))||"",r=t.split("").find((function(t){return/[\u4E00-\u9FA5]/.test(t)}))||"";return"".concat(e).concat(r).toLowerCase()}return/[a-zA-Z]/.test(t)?t.split("").filter((function(t){return/[a-zA-Z]/.test(t)})).slice(0,2).join("").toUpperCase():/[\u4E00-\u9FA5]/.test(t)?t.split("").filter((function(t){return/[\u4E00-\u9FA5]/.test(t)})).slice(-2).join(""):t.replaceAll(" ","").substring(0,2)}}(v.value)||""};return{ns:o,c:i,text:a,editorRef:l,showFormDefaultContent:f,renderContent:function(){var t=a.value;if(!t)return"- - -";var e=i.parseAvatar(t);return E("div",{class:o.b("content")},e?[E("div",{class:o.be("content","head-sculpture")},[E("img",{src:e},null)])]:[E("div",{class:o.be("content","head-sculpture"),style:"background-color:".concat(h(v.value))},[g()]),i.isShowNameText()?E("div",{class:o.be("content","tip")},[v.value]):null])}}},render:function(){return E("div",{class:[this.ns.b(),this.readonly?this.ns.m("readonly"):"",this.ns.is("show-default",this.showFormDefaultContent)],ref:"editorRef"},[this.renderContent()])}}),Y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(m,t);var r,i,d,v=s(m);function m(){var t;o(this,m);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return h(l(t=v.call.apply(v,[this].concat(r))),"valueItem",""),h(l(t),"codeList",void 0),h(l(t),"enableAvatar",!1),h(l(t),"showNameText",!0),h(l(t),"operatorMap",new Map),t}return a(m,[{key:"onInit",value:(d=n(e().mark((function t(){var r,n,o,i,a;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u(f(m.prototype),"onInit",this).call(this),null!==(r=this.model)&&void 0!==r&&null!==(r=r.editorItems)&&void 0!==r&&r[0]&&(this.valueItem=this.model.editorItems[0].id),!this.model.appCodeListId){t.next=7;break}return t.next=5,ibiz.hub.getApp(this.context.srfappid);case 5:n=t.sent,this.codeList=n.codeList.getCodeList(this.model.appCodeListId);case 7:o=this.editorParams,i=o.ENABLEAVATAR,a=o.SHOWNAMETEXT,i&&(this.enableAvatar=this.toBoolean(i)),a&&(this.showNameText=this.toBoolean(a));case 10:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)})},{key:"openLinkView",value:(i=n(e().mark((function t(r){var n,o,i,a,u;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.context.clone(),r[this.valueItem]&&(n.srfkey=r[this.valueItem]),o=this.handlePublicParams(r,n,this.params),i=o.context,a=o.params,u=this.model.linkAppViewId){t.next=6;break}throw new j(this.model,"请配置数据链接视图");case 6:return t.abrupt("return",ibiz.commands.execute(p.TAG,u,i,a));case 7:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"isShowNameText",value:function(){return this.showNameText}},{key:"parseAvatar",value:function(t){if(this.enableAvatar)try{var e=JSON.parse(t);if(e){var r=Array.isArray(e)?e[0]:e;return ibiz.util.file.calcFileUpDownUrl(this.context,this.params).downloadUrl.replace("%fileId%",r.id)}}catch(n){throw new M("头像数据解析异常")}}},{key:"getOperatorUserList",value:(r=n(e().mark((function t(){var r,n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ibiz.hub.getApp(this.context.srfappid);case 2:return r=t.sent,n=[],t.next=6,r.codeList.get("SysOperator",this.context,this.params);case 6:n=t.sent,this.operatorMap=new Map(n.map((function(t){return[t.value,t]})));case 8:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})}]),m}(i),N=function(){function t(){o(this,t),h(this,"formEditor","IBizPersonalInfo"),h(this,"gridEditor","IBizPersonalInfo")}var r;return a(t,[{key:"createController",value:(r=n(e().mark((function t(r,n){var o;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=new Y(r,n),t.next=3,o.init();case 3:return t.abrupt("return",o);case 4:case"end":return t.stop()}}),t)}))),function(t,e){return r.apply(this,arguments)})}]),t}(),I=t("IBizPersonalInfo",g(D,(function(t){t.component(D.name,D),d("EDITOR_CUSTOMSTYLE_PERSONNEL_INFO",(function(){return new N}))})));t("default",{install:function(t){t.use(I)}})}}}))}();
